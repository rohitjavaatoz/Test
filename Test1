	@RequestMapping(value = "/email-messages/search", produces = {"application/json"}, consumes = {"application/json"}, method = RequestMethod.POST)
public ResponseEntity<Set<MailMessageDTO>> getEmailSearch(EmailSearchRequestDTO body, UUID uuid){
		Set<MailMessageDTO> emailList = new HashSet<MailMessageDTO>();
		ResponseEntity<Set<MailMessageDTO>> emailDetails = new ResponseEntity<>(new HashSet<MailMessageDTO>(), HttpStatus.OK);
		LOGGER.info("getEmailSearch: Fetching the Emails list by given input {} : UUID ={}",body,uuid);
		try {
			Set<Integer> emailExtractionIds = emailMessageExtractionService.getEmailExtractionIds(body, uuid);
			Set<Integer> emailIds = emailMessagesService.getEmailMessageIds(body, emailExtractionIds, uuid);
			LOGGER.info("getEmailSearch: Updated the EmailIds List {} : UUID ={}", emailIds, uuid);
			if (null != emailIds && !emailIds.isEmpty())
				emailList.addAll(emailMessagesService.getMatchedEmails(emailIds, body, uuid));
		}
		catch(Exception e){
			LOGGER.info("getEmailSearch: Error while retrieving the EmailList  : e={}, UUID ={}",e,uuid);
			emailDetails.getStatusCode().is4xxClientError();
			return new ResponseEntity<>(new HashSet<MailMessageDTO>(), HttpStatus.BAD_REQUEST);
		}
		emailDetails.getBody().addAll(emailList);
		LOGGER.info("getEmailSearch: Final EmailDetailsList {} added to response : UUID ={}",emailList,uuid);
		return emailDetails;
	}

---------------
public class EmailControllerTest {

    // ... (imports and annotations remain the same)

    @Mock
    private EmailMessageExtractionService emailMessageExtractionService;

    @Mock
    private EmailMessagesService emailMessagesService;

    @Mock
    private Logger logger;

    @InjectMocks
    private EmailController emailController;

    @BeforeEach
    public void setUp() {
        MockitoAnnotations.openMocks(this);
    }

    @Test
    public void testGetEmailSearch_ValidInput_ReturnsEmailDetails() {
        EmailSearchRequestDTO request = new EmailSearchRequestDTO();
        UUID uuid = UUID.randomUUID();

        Set<Integer> mockExtractionIds = new HashSet<>();
        Set<Integer> mockEmailIds = new HashSet<>();
        Set<MailMessageDTO> mockEmailList = new HashSet<>();
        when(emailMessageExtractionService.getEmailExtractionIds(request, uuid)).thenReturn(mockExtractionIds);
        when(emailMessagesService.getEmailMessageIds(request, mockExtractionIds, uuid)).thenReturn(mockEmailIds);
        when(emailMessagesService.getMatchedEmails(mockEmailIds, request, uuid)).thenReturn(mockEmailList);

        ResponseEntity<Set<MailMessageDTO>> response = emailController.getEmailSearch(request, uuid);

        assertEquals(HttpStatus.OK, response.getStatusCode());
        assertNotNull(response.getBody());
        assertTrue(response.getBody().isEmpty());
    }

    @Test
    public void testGetEmailSearch_ExceptionThrown_ReturnsBadRequest() {
        EmailSearchRequestDTO request = new EmailSearchRequestDTO();
        UUID uuid = UUID.randomUUID();

        when(emailMessageExtractionService.getEmailExtractionIds(request, uuid)).thenThrow(new RuntimeException());

        ResponseEntity<Set<MailMessageDTO>> response = emailController.getEmailSearch(request, uuid);

        assertEquals(HttpStatus.BAD_REQUEST, response.getStatusCode());
        assertNotNull(response.getBody());
        assertTrue(response.getBody().isEmpty());

        verify(logger, times(1)).error(anyString(), any(), eq(uuid));
    }
}
